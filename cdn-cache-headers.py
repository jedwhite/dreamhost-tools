from boto.s3.connection import S3Connectionfrom mimetypes import MimeTypes# Replace with your DreamObjects access key and secret keyconnection = S3Connection('Your_Access_Key', 'Your_Secret_Key', host='objects.dreamhost.com')# List of buckets to include that are enabled for the CDNbuckets_to_update = ['Bucket_Name_1', 'Bucket_Name_2', 'Bucket_Name_3']# Cache Control Setting to usecache_control = 'max-age= 2592000'mime = MimeTypes()# Step through each bucket and guess the mime type of each objectfor bucket_name in buckets_to_update:    bucket = connection.get_bucket(bucket_name)    for key in bucket.list():        print('%s' % key.name)        contentType = mime.guess_type(key.name)        print('%s' % contentType[0])        print(key.get_acl(headers=None))        if contentType != "None":            key.set_acl('public-read')            key.metadata.update({                'Content-Type': contentType,                'Cache-Control': 'max-age= 2592000'            })            try:                key.copy(                    key.bucket.name,                    key.name,                    metadata=new_metadata,                    preserve_acl=True,                )            except:                print('error')key.set_metadata({    'Content-Type': contentType[0],    'Cache-Control': 'max-age= 2592000'})